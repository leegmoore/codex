===== PHASE 1: QUALITY VERIFICATION PROMPT =====

ROLE: Code quality verifier for Phase 1 (Basic Chat Flow)

TASK: Run mechanical quality checks and verify phase completion against checklist.

---

VERIFICATION STEPS:

1. Read Phase Context
   - Read: phase-1/CHECKLIST.md (what should be complete)
   - Read: PRD.md Section 2 (success criteria for this phase)
   - Read: TECH-APPROACH.md Section 2 (Phase 1 technical requirements)

2. Run Quality Checks (in sequence)

   TypeScript:
   - Run: npx tsc --noEmit
   - Expected: 0 errors
   - If errors: List all with file:line, FAIL

   ESLint:
   - Run: npm run lint
   - Expected: 0 errors (warnings acceptable)
   - If errors: List all with file:line, FAIL

   Format:
   - Run: npm run format
   - Expected: No file changes
   - If changes: FAIL (code not formatted)

   Tests:
   - Run: npm test
   - Expected: All passing, 0 skipped
   - Check: Mocked-service tests for Phase 1 exist and pass
   - Check: Unit test baseline maintained (1,876+ passing)
   - If failures or skips: List failed/skipped tests, FAIL

3. Verify Checklist Completion
   - Read: phase-1/CHECKLIST.md
   - Check: All tasks marked complete (checked off)
   - If incomplete: List unchecked tasks, FAIL

4. Verify Functional Requirements
   - Check: Can create conversation (cody new command exists)
   - Check: Can send message (cody chat command exists)
   - Check: Mocked-service tests prove multi-turn works
   - If missing: List what's missing, FAIL

5. Verify Files Exist
   - src/cli/index.ts (CLI entry)
   - src/cli/commands/new.ts
   - src/cli/commands/chat.ts
   - src/cli/config.ts
   - src/cli/display.ts
   - tests/mocked-service/phase-1-conversation-flow.test.ts
   - tests/mocks/model-client.ts
   - If missing: List missing files, FAIL

---

OUTPUT FORMAT:

**QUALITY VERIFICATION REPORT - PHASE 1**

**Status:** PASS / FAIL

**Quality Checks:**
- TypeScript: [PASS/FAIL] - [0 errors / X errors listed below]
- ESLint: [PASS/FAIL] - [0 errors / X errors listed below]
- Format: [PASS/FAIL] - [No changes / Files need formatting]
- Tests: [PASS/FAIL] - [All passing / X failures listed below]

**Checklist Completion:**
- [X/Y tasks complete]
- [List any unchecked tasks]

**Functional Requirements:**
- Create conversation: [PRESENT/MISSING]
- Send message: [PRESENT/MISSING]
- Multi-turn history: [VERIFIED/NOT VERIFIED]

**Files:**
- [List any missing required files]

**Issues Found:**
[If FAIL, list all specific issues with file:line references]

**Recommendation:**
- If PASS: Proceed to Stage 2 (Code Review)
- If FAIL: Return to coder with issues list

---

EXECUTION:

Run all checks in sequence. Document results. If any check fails, provide specific details (file:line for errors, exact test names for failures). Be thorough - this is gate before code review.
